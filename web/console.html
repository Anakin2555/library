<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>控制台-线上图书馆</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
    <link rel="stylesheet" href="css/console.css">
    <script src="http://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4" crossorigin="anonymous"></script>
</head>
<body style="background-color: #f8f8f8">


<nav class="navbar navbar-expand-lg navbar-light fixed-top" style="background-color: white">
    <div class="container-fluid">
        <a class="navbar-brand" href="#" style="font-size: 24px">Library Online</a>

        <div class="collapse navbar-collapse" id="navbarNavAltMarkup" style="margin-top:4px;margin-left: 40px">
            <div class="navbar-nav">
                <!--<a class="nav-link" id="link_home" aria-current="page" href="main.html">Home</a>-->

                <a class="nav-link active" id="link_console" aria-current="page" style="margin-left: 12px" href="#">Console</a>

                <!--<a class="nav-link" href="#" style="margin-left: 20px">Features</a>-->
                <!--<form class="d-flex" style="margin-left: 20px;">
                    <input class="form-control me-2" type="search" placeholder="搜索书名" aria-label="Search"
                           style="width: 280px;height:40px;display: inline">
                    <button class="btn btn-outline-dark" type="submit" style="height:36px;margin-top: 2px">GO
                    </button>
                </form>-->

            </div>
        </div>
        <div class="d-flex dropdown" style="margin-right: 20px">
            <a id="login_button" class="btn btn-light " data-bs-toggle="dropdown" type="button"  aria-expanded="false" href="login.html">
                <img src="icon/bootstrap-icons-1.5.0/person.svg" style="margin-right: 6px" width="14" height="14" alt="">
                <p id=“user-info” class="dropdown-toggle" style="display: inline;font-size: 14px;">登录</p>
            </a>
            <ul class="dropdown-menu"  aria-labelledby="dropdownMenuButton" >
                <li><a id="convert_user" class="dropdown-item"  style="font-size: 10px" href="#">切换用户</a></li>
                <li><hr class="dropdown-divider"></li>
                <li><a id="sign_out" class="dropdown-item" style="font-size: 10px" href="#">退出</a></li>
            </ul>
        </div>
    </div>
</nav>




<div class="container align-content-center" style="margin-top: 40px;" >
    <br/>
    <div class="container" style="margin-top: 16px">
        <h1 style="font-weight: bold">控制台</h1>
        <h6>Console</h6>
    </div>

    <table>
        <tr>
            <td style="display: inline">
                <div class="container" style="margin-top: 20px;background-color: #d9f5f5;padding: 20px 30px;width: 400px">
                    <p style="font-size: 24px;font-weight: bold">编辑书籍</p>
                    <p style="font-size: 12px;">更改书库中的书籍信息</p>
                    <div class="input-group mb-3" >
                        <input id="input_title" type="text" class="form-control" placeholder="输入书名" aria-label="输入书名" aria-describedby="button-addon2">
                        <button class="btn btn-outline-primary" type="button" id="button_searchBook">搜索</button>
                    </div>
                </div>

            </td>
            <td>
                <div class="container" style="margin-top: 20px;margin-left:40px;background-color: #d9f5f5;padding: 20px 30px;width: 400px">
                    <p style="font-size: 24px;font-weight: bold">添加书籍</p>
                    <p style="font-size: 12px;">向线上图书馆的书库中添加书本</p>
                    <button type="button" class="btn btn-outline-primary" data-bs-toggle="modal" data-bs-target="#exampleModal" style="width: 120px;height:36px;margin-top: 4px;margin-left:220px;margin-bottom: 14px" data-bs-whatever="@mdo">添加</button>

                </div>
            </td>



        </tr>
    </table>

    <!--<ul class="container list-group list-group align-content-center" style="margin-top: 28px;">
        <li class="list-group-item" style="padding: 36px 40px 40px;">

        </li>
    </ul>-->
    <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 style="font-weight: bold">添加书籍</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body" style="margin-left: 30px">
                    <label for="inputisbn" class="form-label">ISBN</label>
                    <input type="text" id="inputisbn" class="form-control" style="width: 400px" aria-describedby="passwordHelpBlock">
                    <div id="passwordHelpBlock" class="form-text">
                        输入ISBN
                    </div>

                    <label for="inputtitle" class="form-label">书名</label>
                    <input type="text" id="inputtitle" class="form-control" style="width: 400px" aria-describedby="passwordHelpBlock">
                    <div id="passwordHelpBlock" class="form-text">
                        输入书名及版本信息
                    </div>

                    <label for="inputauthor" class="form-label">作者</label>
                    <input type="text" id="inputauthor" class="form-control" style="width: 400px" aria-describedby="passwordHelpBlock">
                    <div id="passwordHelpBlock" class="form-text">
                        输入作者信息
                    </div>

                    <label for="inputpress" class="form-label">出版社</label>
                    <input type="text" id="inputpress" class="form-control" style="width: 400px" aria-describedby="passwordHelpBlock">
                    <div id="passwordHelpBlock" class="form-text">
                        输入出版社信息
                    </div>

                    <label for="inputlanguage" class="form-label">语言</label>
                    <input type="text" id="inputlanguage" class="form-control" style="width: 400px" aria-describedby="passwordHelpBlock">
                    <div id="passwordHelpBlock" class="form-text">
                        输入语言（中、英等）
                    </div>
                    <p class="form-label">封面</p>
                    <div class="mb-3">
                        <input class="" type="file" id="formFile">
                    </div>

                    <label for="inputquantity" class="form-label" >数量</label>
                    <input type="number" id="inputquantity" class="form-control" style="width: 400px" aria-describedby="passwordHelpBlock">
                    <div id="passwordHelpBlock" class="form-text">
                        输入书本数量
                    </div>
                </div>
                <div class="modal-footer">
                    <p id="text_warning" style="display:inline;margin-right:20px;font-size: 12px;color: red"></p>
                    <button id="button_exit" type="button" class="btn btn-default" style="width: 120px">关闭</button>
                    <button id="button_submitForm" type="button" class="btn btn-primary" style="width: 120px">确定</button>
                </div>
            </div>
        </div>
    </div>


    <div class="container" style="position:relative;margin-left: 0px;margin-top:32px;padding:24px;background-color: white">
        <p style="font-size: 24px;font-weight: bold">借阅记录</p>
        <div class="input-group mb-3" style="width: 348px;" >
            <input id="input_search_record" type="text" class="form-control"  placeholder="输入书名" aria-label="输入书名" aria-describedby="button-addon2">
            <button id="button_submit_search" class="btn btn-outline-primary" type="button">查询</button>
        </div>
        <button class="btn btn-outline-primary" type="button" id="button_chart"  style="right:40px;top:76px;position: absolute">统计图</button>
        <button id="button_showall" class="btn btn-light" style="display:none;font-size: 12px"></button>
        <table class="table" style="margin-top: 28px">
            <thead>
            <tr>
                <th scope="col"></th>
                <th scope="col">书名</th>
                <th scope="col">ISBN</th>
                <th scope="col">借阅者</th>
                <th scope="col">借阅时间</th>
                <th scope="col">状态</th>
                <th scope="col"></th>
            </tr>
            </thead>
            <tbody id="tbody">
            <!--<tr>
                <th scope="row">1</th>
                <td>Markddd</td>
                <td>Ottoddd</td>
                <td>@mdo</td>
                <td>@mdo</td>
                <td><button class="btn btn-outline-primary" style="padding:0px;font-size:12px;width: 50px;height:28px">归还</button></td>
            </tr>-->
            </tbody>
        </table>
    </div>













</div>
<script>
    var exampleModal = document.getElementById('exampleModal')
    exampleModal.addEventListener('show.bs.modal', function (event) {
        // Button that triggered the modal
        var button = event.relatedTarget
        // Extract info from data-bs-* attributes
        var recipient = button.getAttribute('data-bs-whatever')
        // If necessary, you could initiate an AJAX request here
        // and then do the updating in a callback.
        //
        // Update the modal's content.
        /*var modalTitle = exampleModal.querySelector('.modal-title')
        var modalBodyInput = exampleModal.querySelector('.modal-body input')*/

    })
    var $isbn=$("#inputisbn")
    var $title=$("#inputtitle")
    var $author=$("#inputauthor")
    var $press=$("#inputpress")
    var $language=$("#inputlanguage")
    var $quantity=$("#inputquantity")

    $("#button_exit").click(function () {
        location.reload()
    })


    $("#button_submitForm").click(function () {
        if($isbn.val()===""){
            $("#text_warning").text("请填写ISBN")
        }
        else if($title.val()===""){
            $("#text_warning").text("请填写图书书名和版本")
        }
        else if($author.val()===""){
            $("#text_warning").text("请填写图书作者")
        }
        else if($press.val()===""){
            $("#text_warning").text("请填写出版社")
        }
        else if($language.val()===""){
            $("#text_warning").text("请填写图书语言")
        }
        else if($quantity.val()===""){
            $("#text_warning").text("请填写图书数量")
        }
        else{
                var json={
                    "isbn":$isbn.val(),
                    "title":$title.val(),
                    "author":$author.val(),
                    "press":$press.val(),
                    "language":$language.val(),
                    "quantity":parseInt($quantity.val())

                }
                var string=JSON.stringify(json)
            console.log(string)

            $.ajax({
                url:"http://localhost:8080/addBook",
                data:"get",
                datatype:json,
                data:{
                    param:string
                },
                success(result){
                    console.log(result)
                    window.alert("添加成功！")

                }

            })

        }
    })
</script>

<script src="js/console.js"></script>


</body>
</html>